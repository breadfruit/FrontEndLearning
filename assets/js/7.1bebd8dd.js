(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{409:function(t,s,a){t.exports=a.p+"assets/img/week27.c4c7c529.png"},410:function(t,s,a){t.exports=a.p+"assets/img/week27-1.3e639d83.png"},411:function(t,s,a){t.exports=a.p+"assets/img/week27-2.5c53fb5e.png"},412:function(t,s,a){t.exports=a.p+"assets/img/week27-3.1aa15c52.png"},413:function(t,s,a){t.exports=a.p+"assets/img/week27-4.f178d983.png"},414:function(t,s,a){t.exports=a.p+"assets/img/week27-5.55c62b69.png"},415:function(t,s,a){t.exports=a.p+"assets/img/week27-6.126af773.png"},458:function(t,s,a){"use strict";a.r(s);var e=a(2),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("Date Created: November 27, 2022 5:37 PM\nStatus: To Do")]),t._v(" "),s("h2",{attrs:{id:"algorithm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#algorithm"}},[t._v("#")]),t._v(" Algorithm")]),t._v(" "),s("p",[s("img",{attrs:{src:a(409),alt:"An image"}})]),t._v(" "),s("h2",{attrs:{id:"review"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#review"}},[t._v("#")]),t._v(" Review")]),t._v(" "),s("p",[s("strong",[s("strong",[t._v("iconfont使用渐变")])])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/background-clip",target:"_blank",rel:"noopener noreferrer"}},[t._v("background-clip - CSS: Cascading Style Sheets | MDN"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".grandient")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" transparent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                             "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 将iconfont的颜色改为透明 */")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-background-clip")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 将背景图的绘画仅作用在文字上 */")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("linear-gradient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("225deg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" #4158D0 0%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" #C850C0 46%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" #FFCC70 100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 你的渐变色 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"tips"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tips"}},[t._v("#")]),t._v(" Tips")]),t._v(" "),s("h3",{attrs:{id:"背景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),s("p",[t._v("缺少本地调试，组件库因此浪费多个版本号tag。")]),t._v(" "),s("h3",{attrs:{id:"措施"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#措施"}},[t._v("#")]),t._v(" 措施")]),t._v(" "),s("p",[t._v("库使用接入的依赖。")]),t._v(" "),s("h3",{attrs:{id:"怎么做"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#怎么做"}},[t._v("#")]),t._v(" 怎么做")]),t._v(" "),s("ol",[s("li",[t._v("在nbd-lib-mobile进行yarn link，这时候会在"),s("code",[t._v("{prefix}/lib/node_modules/<package")]),t._v("创建文件夹。")])]),t._v(" "),s("p",[t._v("其中prefix可以通过在终端进行\n"),s("strong",[t._v("npm prefix -g查看")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(410),alt:"An image"}})]),t._v(" "),s("ol",[s("li",[t._v("在使用方进行yarn link pakage-name进行映射。")]),t._v(" "),s("li",[t._v("删除软链接")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" unlink page-name\n\n")])])]),s("h3",{attrs:{id:"faq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[t._v("#")]),t._v(" FAQ")]),t._v(" "),s("p",[t._v("当使用方的依赖和库有相同的依赖，导致包重复。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(411),alt:"An image"}})]),t._v(" "),s("p",[t._v("可以查看库的package.json中有这样一段")]),t._v(" "),s("blockquote",[s("p",[t._v("peerDependencies在install的时候是不会去安装的。")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build:dumi"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dumi build"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"peerDependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"react"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^17.0.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"react-router-dom"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^5.2.0"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:a(412),alt:"An image"}})]),t._v(" "),s("p",[t._v("查看yarn.lock文件，可以看umi在构建的时候会安装react安装包。所以在进行调试的时候肯定也是从构建产物的文件中读取。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(413),alt:"An image"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(414),alt:"An image"}})]),t._v(" "),s("p",[t._v("因此我们需要组件库去link接入方的依赖")]),t._v(" "),s("p",[t._v("错误做法：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("yarn link /usr/local/lib/node_modules/fe-nbd-ykd/node_modules/react\n")])])]),s("p",[t._v("正确做法：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("yarn link ../../fe-nbd-ykd/node_modules/react\n")])])]),s("blockquote",[s("p",[t._v("查看lock文件指定包的依赖关系  npm ls pack-name")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(415),alt:"An image"}})]),t._v(" "),s("p",[s("a",{attrs:{href:"https://yvonnickfrin.dev/handling-peer-dependencies",target:"_blank",rel:"noopener noreferrer"}},[t._v("How to handle peer dependencies when developing modules"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);